!function e(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("handorgel",[],n):"object"==typeof exports?exports.handorgel=n():t.handorgel=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){var i,s,o;!function(n,r){var a;s=[t],i=r,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i={},s=["a","button","input","label","select","textarea"],o=function(){function e(n,s,o){t(this,e),s.handorgelFold||(this.handorgel=n,this.header=s,this.button=s.firstElementChild,this.content=o,this.header.handorgelFold=this,this.content.handorgelFold=this,i[this.handorgel.id]||(i[this.handorgel.id]=0),this.id=this.handorgel.id+"-fold"+ ++i[this.handorgel.id],this.focused=!1,this.expanded=!1,this.disabled=!1,this._listeners={},this._ctrlKeyPressed=!1,this._bindEvents(),this._initAria(),this._initialOpen())}return n(e,[{key:"open",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded||(this.expanded=!0,this.handorgel.emitEvent("fold:open",[this]),this.handorgel.options.ariaEnabled&&(this.button.setAttribute("aria-expanded","true"),this.handorgel.options.collapsible||this.disable()),this.header.classList.add(this.handorgel.options.headerOpenClass),this.content.classList.add(this.handorgel.options.contentOpenClass),this.resize(t),t||(this.header.classList.add(this.handorgel.options.headerOpenedClass),this.content.classList.add(this.handorgel.options.contentOpenedClass),this.handorgel.emitEvent("fold:opened",[this])))}},{key:"close",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded&&(this.expanded=!1,this.handorgel.emitEvent("fold:close",[this]),this.handorgel.options.ariaEnabled&&(this.button.setAttribute("aria-expanded","false"),this.enable()),this.header.classList.remove(this.handorgel.options.headerOpenedClass),this.content.classList.remove(this.handorgel.options.contentOpenedClass),this.header.classList.remove(this.handorgel.options.headerOpenClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.resize(t),t||this.handorgel.emitEvent("fold:closed",[this]))}},{key:"disable",value:function e(){this.disabled=!0,this.button.setAttribute("aria-disabled","true"),this.header.classList.add(this.handorgel.options.headerDisabledClass),this.content.classList.add(this.handorgel.options.contentDisabledClass)}},{key:"enable",value:function e(){this.disabled=!1,this.button.setAttribute("aria-disabled","false"),this.header.classList.remove(this.handorgel.options.headerDisabledClass),this.content.classList.remove(this.handorgel.options.contentDisabledClass)}},{key:"focus",value:function e(){this.button.focus()}},{key:"blur",value:function e(){this.button.blur()}},{key:"toggle",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.expanded?this.close():this.open()}},{key:"resize",value:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;n||(this.header.classList.add(this.handorgel.options.headerNoTransitionClass),this.content.classList.add(this.handorgel.options.contentNoTransitionClass)),this.expanded&&(i=this.content.firstElementChild.offsetHeight),this.content.style.height=i+"px",window.setTimeout(function(){t.header.classList.remove(t.handorgel.options.headerNoTransitionClass),t.content.classList.remove(t.handorgel.options.contentNoTransitionClass)},0)}},{key:"destroy",value:function e(){this._unbindEvents(),this._cleanAria(),this.header.classList.remove(this.handorgel.options.headerOpenClass),this.header.classList.remove(this.handorgel.options.headerNoTransitionClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.content.classList.remove(this.handorgel.options.contentNoTransitionClass),this.content.style.height="0px",this.header.handorgelFold=null,this.content.handorgelFold=null,this.handorgel=null}},{key:"_initialOpen",value:function e(){var t=this;null===this.header.getAttribute(this.handorgel.options.initialOpenAttribute)&&null===this.content.getAttribute(this.handorgel.options.initialOpenAttribute)||(this.handorgel.options.initialOpenTransition?window.setTimeout(function(){t.open()},this.handorgel.options.initialOpenTransitionDelay):this.open(!1))}},{key:"_initAria",value:function e(){this.handorgel.options.ariaEnabled&&(this.content.setAttribute("id",this.id+"-content"),this.content.setAttribute("role","region"),this.content.setAttribute("aria-labelledby",this.id+"-header"),this.button.setAttribute("id",this.id+"-header"),this.button.setAttribute("aria-controls",this.id+"-content"),this.button.setAttribute("aria-expanded","false"),this.button.setAttribute("aria-disabled","false"))}},{key:"_cleanAria",value:function e(){this.content.removeAttribute("id"),this.content.removeAttribute("role"),this.content.removeAttribute("aria-labelledby"),this.button.removeAttribute("id"),this.button.removeAttribute("aria-controls"),this.button.removeAttribute("aria-expanded"),this.button.removeAttribute("aria-disabled")}},{key:"_handleTransitionEnd",value:function e(t){"height"==t.propertyName&&(this.handorgel.resize(!0),this.expanded?(this.header.classList.add(this.handorgel.options.headerOpenedClass),this.content.classList.add(this.handorgel.options.contentOpenedClass),this.handorgel.emitEvent("fold:opened",[this])):this.handorgel.emitEvent("fold:closed",[this]))}},{key:"_handleFocus",value:function e(){this.focused=!0,this.handorgel.emitEvent("fold:focus",[this])}},{key:"_handleBlur",value:function e(){this.focused=!1,this.handorgel.emitEvent("fold:blur",[this])}},{key:"_handleButtonClick",value:function e(t){this.disabled||t.target!=t.currentTarget&&s.indexOf(t.target.nodeName.toLowerCase())>-1||this.toggle()}},{key:"_handleButtonKeydown",value:function e(t){if(this.handorgel.options.keyboardInteraction)switch(t.which){case 40:t.preventDefault(),this.handorgel.focus("next");break;case 38:t.preventDefault(),this.handorgel.focus("prev");break;case 36:t.preventDefault(),this.handorgel.focus("first");break;case 35:t.preventDefault(),this.handorgel.focus("last");break;case 34:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("next"));break;case 33:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("prev"));break;case 17:this._ctrlKeyPressed=!0}}},{key:"_handleContentKeydown",value:function e(t){if(this.handorgel.options.keyboardInteraction)switch(t.which){case 34:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("next"));break;case 33:this._ctrlKeyPressed&&(t.preventDefault(),this.handorgel.focus("prev"));break;case 17:this._ctrlKeyPressed=!0}}},{key:"_handleKeyup",value:function e(){this._ctrlKeyPressed=!1}},{key:"_bindEvents",value:function e(){this._listeners.focus=this._handleFocus.bind(this),this._listeners.blur=this._handleBlur.bind(this),this._listeners.keyup=this._handleKeyup.bind(this),this._listeners.buttonClick=this._handleButtonClick.bind(this),this._listeners.buttonKeydown=this._handleButtonKeydown.bind(this),this.button.addEventListener("focus",this._listeners.focus),this.button.addEventListener("blur",this._listeners.blur),this.button.addEventListener("keyup",this._listeners.keyup),this.button.addEventListener("keydown",this._listeners.buttonKeydown),this.button.addEventListener("click",this._listeners.buttonClick),this._listeners.contentKeydown=this._handleContentKeydown.bind(this),this._listeners.contentTransition=this._handleTransitionEnd.bind(this),this.content.addEventListener("focus",this._listeners.focus),this.content.addEventListener("blur",this._listeners.blur),this.content.addEventListener("keyup",this._listeners.keyup),this.content.addEventListener("keydown",this._listeners.contentKeydown),this.content.addEventListener("transitionend",this._listeners.contentTransition)}},{key:"_unbindEvents",value:function e(){this.button.removeEventListener("click",this._listeners.buttonClick),this.button.removeEventListener("focus",this._listeners.focus),this.button.removeEventListener("blur",this._listeners.blur),this.button.removeEventListener("keyup",this._listeners.keyup),this.button.removeEventListener("keydown",this._listeners.buttonKeydown),this.content.removeEventListener("transitionend",this._listeners.contentTransition),this.content.removeEventListener("focus",this._listeners.focus),this.content.removeEventListener("blur",this._listeners.blur),this.content.removeEventListener("keyup",this._listeners.keyup),this.content.removeEventListener("keydown",this._listeners.contentKeydown)}}]),e}();e.default=o})},function(e,t,n){var i,s,o;!function(n,r){var a;s=[t],i=r,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e){return"undefined"==typeof e}function n(e,n){var i=Object.getOwnPropertyDescriptor(e,n);return t(e[n])||i&&i.writable}function i(e){for(var t,i=arguments,s=1;s<i.length;++s)if(t=i[s])for(var o in t)n(e,o)&&(e[o]=t[o]);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefined=t,e.isWritable=n,e.extend=i;var s=e.rAF=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()})},function(e,t,n){var i,s;!function(o,r){i=r,s="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==s&&(e.exports=s))}("undefined"!=typeof window?window:this,function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return i.indexOf(t)==-1&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{},i=n[e]=n[e]||{};return i[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return i!=-1&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=0,s=n[i];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];s;){var r=o&&o[s];r&&(this.off(e,s),delete o[s]),s.apply(this,t),i+=r?0:1,s=n[i]}return this}},e})},function(e,t,n){var i,s,o;!function(r,a){var l;s=[t,n(2),n(1),n(0)],i=a,o="function"==typeof i?i.apply(t,s):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var l=s(t),h=s(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=0,c=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handorgel?r(s):(s.element=e,s.element.handorgel=s,s.id="handorgel"+ ++u,s.folds=[],s.options=(0,n.extend)({},t.defaultOptions,i),s._listeners={},s._resizing=!1,s._bindEvents(),s._initAria(),s.update(),s)}return a(t,e),d(t,[{key:"update",value:function e(){this.folds=[];for(var t=this.element.children,n=0,i=t.length;n<i;n+=2){var s=t[n],o=t[n+1],r=s.handorgelFold;r||(r=new h.default(this,t[n],t[n+1])),this.folds.push(r)}}},{key:"resize",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.folds.forEach(function(e){e.resize(t)}),this._resizing=!1}},{key:"focus",value:function e(t){for(var n=null,i=this.folds.length,s=0;s<i&&null===n;s++)this.folds[s].focused&&(n=s);if("prev"!=t&&"next"!=t||null!==n||(t="prev"==t?"last":"first"),"prev"==t&&0==n){if(!this.options.carouselFocus)return;t="last"}if("next"==t&&n==i-1){if(!this.options.carouselFocus)return;t="first"}switch(t){case"prev":this.folds[--n].focus();break;case"next":this.folds[++n].focus();break;case"last":this.folds[i-1].focus();break;case"first":default:this.folds[0].focus()}}},{key:"destroy",value:function e(){this.emitEvent("destroy"),this.folds.forEach(function(e){e.destroy()}),this._unbindEvents(),this._cleanAria(),this.element.handorgel=null,this.emitEvent("destroyed")}},{key:"_handleFoldOpen",value:function e(t){this.options.multiSelectable||this.folds.forEach(function(e){t!==e&&e.close()})}},{key:"_handleResize",value:function e(){var t=this;this._resizing||(this._resizing=!0,(0,n.rAF)(function(){t.resize()}))}},{key:"_initAria",value:function e(){this.options.ariaEnabled&&(this.element.setAttribute("role","tablist"),this.options.multiSelectable&&this.element.setAttribute("aria-multiselectable","true"))}},{key:"_cleanAria",value:function e(){this.element.removeAttribute("role"),this.element.removeAttribute("aria-multiselectable")}},{key:"_bindEvents",value:function e(){this._listeners.resize=this._handleResize.bind(this),window.addEventListener("resize",this._listeners.resize),this._listeners.foldOpen=this._handleFoldOpen.bind(this),this.on("fold:open",this._listeners.foldOpen)}},{key:"_unbindEvents",value:function e(){window.removeEventListener("resize",this._listeners.resize),this.off("open",this._listeners.foldOpen)}}]),t}(l.default);e.default=c,c.defaultOptions={keyboardInteraction:!0,multiSelectable:!0,ariaEnabled:!0,collapsible:!0,carouselFocus:!0,initialOpenAttribute:"data-open",initialOpenTransition:!0,initialOpenTransitionDelay:200,headerOpenClass:"handorgel__header--open",headerOpenedClass:"handorgel__header--opened",contentOpenClass:"handorgel__content--open",contentOpenedClass:"handorgel__content--opened",headerDisabledClass:"handorgel__header--disabled",contentDisabledClass:"handorgel__content--disabled",headerNoTransitionClass:"handorgel__header--notransition",contentNoTransitionClass:"handorgel__content--notransition"}})}])});
//# sourceMappingURL=handorgel.min.js.map